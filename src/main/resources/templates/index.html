<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The Light Saber Shop</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/custom.css" rel="stylesheet">
<link rel="shortcut icon" type="image/png" href="/favicon.png"/>
<script type="text/javascript">	

	//Limiting setting menu just for admin 
	function checkMenu(){
		if(![[${#httpServletRequest.isUserInRole("JEDIMASTER")}]]){
			removeElement("jediMasterMenu");
			if(![[${#httpServletRequest.isUserInRole("USER")}]]){
				removeElement("logoutMenu");
				removeElement("saberListMenu");
				removeElement("emailLabel");
			};
		};
		if([[${#httpServletRequest.isUserInRole("JEDIMASTER")}]] || [[${#httpServletRequest.isUserInRole("USER")}]]){
			removeElement("signUpMenu");
			removeElement("loginMenu");
			if([[${#httpServletRequest.isUserInRole("USER")}]]){
				getUser("Jedisabershop/user/single",'{"email":"'+document.getElementById("emailLabel").innerHTML+'"}');
			}else{
				document.getElementById("containerUser").innerHTML = "Welcome Master Jedi... That's honor to see you here..."
			}
		};
	};
	
	
	// Code for generation contents in the container when pages from menu link selected
	function generatePage(page){
		var container = document.getElementById("container");
		switch(page){
			case "Light Sabers":
				var divHeader = document.createElement("DIV");
				divHeader.className="container-fluid";
				divHeader.id = "divHeader";
				container.appendChild(divHeader);
				var header = document.createElement("H3");
				header.className="col-sm-12 text-center";
				divHeader.appendChild(header);
				header.innerHTML  = "Light Sabers";
				if(document.getElementById("containerUser").getElementsByTagName("LABEL").length == 0){
					var header = document.createElement("P");
					header.className="col-sm-12 text-center bg-warning";
					divHeader.appendChild(header);
					header.innerHTML  = "You can <b>Sign Up</b> / <b>Login</b> to see specialized <b>Light Sabers</b> and <b>Order</b>";
				}
				var div = document.createElement("DIV");
				div.className = "container-fluid margin-top-10";
				container.appendChild(div);
				var divCombatFormFilter = document.createElement("DIV");
				divCombatFormFilter.className = "col-sm-4";
				div.appendChild(divCombatFormFilter);
				var combatFilter = document.createElement("SELECT");
				combatFilter.id = "combatFilter";
				combatFilter.className = "form-control";
				combatFilter.onchange = function(){getSaberSorted()};
				divCombatFormFilter.appendChild(combatFilter);
				addCombatFormSelectOptions();
				var divSortValue = document.createElement("DIV");
				divSortValue.className = "col-sm-offset-2 col-sm-3";
				div.appendChild(divSortValue);
				var divSortType = document.createElement("DIV");
				divSortType.className = "col-sm-3";
				div.appendChild(divSortType);
				var selectSortValue = document.createElement("SELECT");
				selectSortValue.id = "selectSortValue";
				selectSortValue.className = "form-control";
				selectSortValue.onchange = function(){getSaberSorted()};
				divSortValue.appendChild(selectSortValue);
				var selectSortType = document.createElement("SELECT");
				selectSortType.id = "selectSortType";
				selectSortType.className = "form-control";
				selectSortType.onchange = function(){getSaberSorted()};
				divSortType.appendChild(selectSortType);
				var optionsSortValue = [{name:"Name", value:"name"},{name:"Available", value:"available"},{name:"Crystal Name", value:"crystalName"}
				,{name:"Crystal Planet", value:"planet"},{name:"Color", value:"color"},{name:"Force", value:"force"},{name:"Price", value:"price"}];
				for (x in optionsSortValue){
					addOption("selectSortValue", optionsSortValue[x].name,  optionsSortValue[x].value);
				};
				
				var optionsSortType = [{name:"Ascending", value:"Asc"},{name:"Descending", value:"Desc"}];
				for (x in optionsSortType){
					addOption("selectSortType", optionsSortType[x].name,  optionsSortType[x].value);
				};
				
				var divSabers = document.createElement("DIV");
				divSabers.id = "divSabers";
				divSabers.className = "container-fluid margin-top-10";
				container.appendChild(divSabers);
				getSaberSorted();
				break;
				
			case "XML List":
				var myObj, x;
				var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						var header = document.createElement("H3");
						header.className="col-sm-12 text-center";
						container.appendChild(header);
						header.innerHTML  = "XML List Of Light Sabers";
						var div = document.createElement("DIV");
						div.className = "container-fluid";
						var textarea = document.createElement("TEXTAREA");
						textarea.className="form-control";
						// textarea.readOnly  = "true"; - This line can comment out for making text area editable
						textarea.rows = "30";
						textarea.style = "resize:none;"
						textarea.appendChild(document.createTextNode(this.responseText));
						div.appendChild(textarea);
						container.appendChild(div);						
					}
				};
				xhttp.open("GET", "http://localhost:8082/Jedisabershop/saber/xml");
				xhttp.setRequestHeader("Content-type", "application/xml");
				xhttp.send();
				break;
				
			case "XML File":
				var myObj, x;
				var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						var element = document.createElement("A");
						element.setAttribute('href', 'data:application/xml;charset=utf-8,' + encodeURIComponent(this.responseText));
						element.setAttribute('download', 'LightSabers.xml');
						element.style.display = 'none';
						container.appendChild(element);
						element.click();
						container.removeChild(element);
					}
				};
				xhttp.open("GET", "http://localhost:8082/Jedisabershop/saber/xml");
				xhttp.setRequestHeader("Content-type", "application/xml");
				xhttp.send();
				break;	
				
			case"Add New Light Saber":
				var header = document.createElement("H3");
				header.id = "header_result";
				header.className="col-sm-12 text-center";
				container.appendChild(header);
				header.innerHTML  = "Add New Light Saber Form";
				var divFormHorizontal = document.createElement("DIV");
				divFormHorizontal.className = "form-horizontal";
				function createFormInput(labelText, id, inputType){
					var divFormGroup = document.createElement("DIV");
					divFormGroup.className = "form-group";
					var label = document.createElement("LABEL");
					label.className = "col-sm-3 control-label";
					label.appendChild(document.createTextNode(labelText));
					divFormGroup.appendChild(label);
					var divInput = document.createElement("DIV");
					divInput.className = "col-sm-8";
					switch(id){
						default:
							var input = document.createElement("INPUT");
							input.className = "form-control";
							input.id = id + "_input";
							input.type = inputType;
							input.placeholder = labelText;
							if(inputType == "number"){
								input.min = "0";
								input.step = "1";
							}
							divInput.appendChild(input);
							break;
							
						case "crystalSearch":
							var divInputGroup = document.createElement("DIV");
							divInputGroup.className = "input-group";
							var input = document.createElement("INPUT");
							input.className = "form-control";
							input.id = id;
							input.placeholder = "Search For Crystal";
							input.onkeyup = function(){("crystalTable","crystalSearch")};
							divInputGroup.appendChild(input);
							var divAddon = document.createElement("DIV");
							divAddon.className = "input-group-addon";
							var searchGlyphicon =  document.createElement("SPAN");
							searchGlyphicon.className = "glyphicon glyphicon-search";
							divAddon.appendChild(searchGlyphicon);
							divInputGroup.appendChild(divAddon);
							divInput.appendChild(divInputGroup);
							break;
					}
					divFormGroup.appendChild(divInput);
					divFormHorizontal.appendChild(divFormGroup);
				}
				
				function createCrystalTable(){
					var divFormGroup = document.createElement("DIV");
					divFormGroup.className = "form-group";
					var label = document.createElement("LABEL");
					label.className = "col-sm-3 control-label";
					label.appendChild(document.createTextNode("Crystals List"));
					divFormGroup.appendChild(label);
					var divInput = document.createElement("DIV");
					divInput.className = "col-sm-8 panel panel-default";
					divInput.style = "overflow-y:auto; height:150px;"
					var crystalTable =  document.createElement("TABLE");
					crystalTable.id = "crystalTable";
					crystalTable.className = "table table-striped table-condensed";
					var tableBody =  document.createElement("TBODY");
					crystalTable.appendChild(tableBody);
					var rowHeader =  document.createElement("TR");
					rowHeader.className = "header";
					var headerTexts = ["#","Name","Color","Power Usage","Price"];
					for(x in headerTexts){
						var header =  document.createElement("TH");
						header.innerHTML = headerTexts[x];
						rowHeader.appendChild(header);
					}
					tableBody.appendChild(rowHeader);
					var myObj, x;
					var xhttp = new XMLHttpRequest();
					xhttp.onreadystatechange = function() {
						if (this.readyState == 4 && this.status == 200) {
							myObj = JSON.parse(this.responseText);
							for(x in myObj){
								var row =  document.createElement("TR");
								row.id = myObj[x].id + "_row";
								var columnRadio = document.createElement("TD");
								var radio = document.createElement("INPUT");
								radio.type = "radio";
								radio.name = "crystalRadio";
								radio.value = myObj[x].id;
								radio.id = myObj[x].id + "_radio";
								columnRadio.appendChild(radio);
								row.appendChild(columnRadio);
								var columnName =  document.createElement("TD");
								columnName.innerHTML = myObj[x].name;
								row.appendChild(columnName);
								var columnColor =  document.createElement("TD");
								columnColor.innerHTML = myObj[x].color;
								row.appendChild(columnColor);
								var columnPowerUsage =  document.createElement("TD");
								columnPowerUsage.innerHTML = myObj[x].powerUsageMultiplier;
								row.appendChild(columnPowerUsage);
								var columnStockPrice =  document.createElement("TD");
								columnStockPrice.innerHTML = myObj[x].stockPrice;
								row.appendChild(columnStockPrice);
								tableBody.appendChild(row);
							}
						}
					}
					xhttp.open("GET", "http://localhost:8082/Jedisabershop/crystal");
					xhttp.setRequestHeader("Content-type", "application/json");
					xhttp.send();
					divInput.appendChild(crystalTable);
					divFormGroup.appendChild(divInput);
					divFormHorizontal.appendChild(divFormGroup);
				}
				
				//Supported Combat Forms Selection function for adding saber mane
				function createCombatForm(){
					
					//supported combat forms panel
					var divFormGroup = document.createElement("DIV");
					divFormGroup.className = "form-group";
					var divCombatForms = document.createElement("DIV");
					divCombatForms.className = "col-sm-offset-3 col-sm-8";
					divFormGroup.appendChild(divCombatForms);
					var divCol = document.createElement("DIV");
					divCol.className = "col-sm-5";
					divCombatForms.appendChild(divCol);
					var divPanel = document.createElement("DIV");
					divPanel.className = "panel panel-default";
					divCol.appendChild(divPanel);
					var divHeader = document.createElement("DIV");
					divHeader.className = "panel-heading text-center";
					divHeader.appendChild(document.createTextNode("Supported Combat Form(s)"));
					divPanel.appendChild(divHeader);
					var divSelectedCombatForm = document.createElement("DIV");
					divSelectedCombatForm.className = "panel-body";
					divSelectedCombatForm.id = "divSelectedCombatForm";
					divSelectedCombatForm.ondrop = function(event){dropSelected(event)};
					divSelectedCombatForm.ondragover = function(event){allowDrop(event)};
					divPanel.appendChild(divSelectedCombatForm);
					
					// combat forms panel
					var divCol = document.createElement("DIV");
					divCol.className = "col-sm-offset-2 col-sm-5";
					divCombatForms.appendChild(divCol);
					var divPanel = document.createElement("DIV");
					divPanel.className = "panel panel-default";
					divCol.appendChild(divPanel);
					var divHeader = document.createElement("DIV");
					divHeader.className = "panel-heading text-center";
					divHeader.appendChild(document.createTextNode("Combat Form(s))"));
					divPanel.appendChild(divHeader);
					var divUnselectedCombatForm = document.createElement("DIV");
					divUnselectedCombatForm.className = "panel-body";
					divUnselectedCombatForm.id = "divUnselectedCombatForm";
					divUnselectedCombatForm.ondrop = function(event){dropUnselected(event)};
					divUnselectedCombatForm.ondragover = function(event){allowDrop(event)};
					divPanel.appendChild(divUnselectedCombatForm);
					
					//getting combat forms into panels
					var myObj, x, txt = "";
					var xhttp = new XMLHttpRequest();
					xhttp.onreadystatechange = function() {
						if (this.readyState == 4 && this.status == 200) {
							myObj = JSON.parse(this.responseText);
							for(x in myObj){
								var divCombatForm = document.createElement("DIV"); 
								divCombatForm.className="row";
								divCombatForm.style="margin-top:5px; margin-bottom:5px";
								divCombatForm.id = myObj[x].id + "_div"
								var checkbox = document.createElement("INPUT");
								checkbox.className = "col-sm-offset-1 col-sm-1";
								checkbox.type = "checkbox";
								checkbox.id = myObj[x].id;
								checkbox.onclick = function(){changeCombatFormSelection(this.id)};
								divCombatForm.appendChild(checkbox);
								var label = document.createElement("LABEL");
								var labelText = document.createTextNode(myObj[x].name);
								label.className = "col-sm-11";
								label.appendChild(labelText);
								divCombatForm.appendChild(label);
								if(myObj[x].name != "Shii-Cho"){
									divCombatForm.draggable="true";
									divCombatForm.ondragstart=function(event){drag(event)};
									divUnselectedCombatForm.appendChild(divCombatForm);
								} else {
									checkbox.checked = true;
									checkbox.disabled = true;
									divSelectedCombatForm.appendChild(divCombatForm);
								}
							}
						}
					};
					xhttp.open("GET", "http://localhost:8082/Jedisabershop/combatform");
					xhttp.setRequestHeader("Content-type", "application/json");
					xhttp.send();
					divFormHorizontal.appendChild(divFormGroup);
				}
				
				function createSaveButton(){
					var divFormGroup = document.createElement("DIV");
					divFormGroup.className = "form-group";
					var divSaveButton = document.createElement("DIV");
					divSaveButton.className = "col-sm-offset-3 col-sm-8";
					var saveButton = document.createElement("BUTTON");
					saveButton.className = "btn btn-default btn-lg btn-block";
					saveButton.onclick = saveNewLightSaber;
					saveButton.appendChild(document.createTextNode("Save Light Saber"));
					divSaveButton.appendChild(saveButton);
					divFormGroup.appendChild(divSaveButton);
					divFormHorizontal.appendChild(divFormGroup);
				}

				createFormInput("Light Saber's Name","name","text");
				createFormInput("Available","available","number");
				createFormInput("Search For Crystal","crystalSearch","text");
				createCrystalTable();
				createCombatForm();
				createSaveButton();
				container.appendChild(divFormHorizontal);
				break;
				
			case"Add Light Sabers From XML File":
				var divHeader = document.createElement("DIV");
				divHeader.className="container-fluid";
				container.appendChild(divHeader);
				var header = document.createElement("H3");
				header.className="col-sm-12 text-center";
				divHeader.appendChild(header);
				header.innerHTML  = "Add Light Sabers From XML File";
				var fileIcon = document.createElement("SPAN");
				fileIcon.className="glyphicon glyphicon-file margin-left-5";
				header.appendChild(fileIcon);
				var form = document.createElement("FORM");
				container.appendChild(form);
				var inputDiv = document.createElement("DIV");
				inputDiv.className = "container-fluid margin-top-30";
				form.appendChild(inputDiv);
				var inputLabel = document.createElement("LABEL");
				inputLabel.className = "col-sm-5 control-label text-right";
				inputLabel.innerHTML = "XML File: ";
				inputDiv.appendChild(inputLabel);
				var inputFile = document.createElement("INPUT");
				inputFile.className = "col-sm-7 control-label";
				inputFile.type = "file";
				inputFile.id = "inputFile";
				inputFile.accept = ".xml"
				inputFile.addEventListener("getFile", getDataFromXmlFile, false);
				inputDiv.appendChild(inputFile);
				var buttonDiv = document.createElement("DIV");
				buttonDiv.className = "container-fluid margin-top-30";
				form.appendChild(buttonDiv);
				var button = document.createElement("BUTTON");
				button.className = "btn btn-default col-sm-offset-4 col-sm-4";
				button.innerHTML = "Get XML Data From File";
				button.onclick = function(){
					var event = new Event("getFile");
					inputFile.dispatchEvent(event);
					};
				//button.type = "";
				buttonDiv.appendChild(button);
				break;
				
			case"Light Saber Stock List":
				var divHeader = document.createElement("DIV");
				divHeader.className="container-fluid";
				divHeader.id = "divHeader";
				container.appendChild(divHeader);
				var header = document.createElement("H3");
				header.className="col-sm-12 text-center";
				divHeader.appendChild(header);
				header.innerHTML  = "Light Saber Stock List";
				var div = document.createElement("DIV");
				div.className = "container-fluid margin-top-10";
				container.appendChild(div);				
				var divSearchDiv = document.createElement("DIV");
				divSearchDiv.className = "col-sm-4 col-xs-12";
				var divInputGroup = document.createElement("DIV");
				divInputGroup.className = "input-group";
				var divCombatFormFilter = document.createElement("DIV");
				divCombatFormFilter.className = "col-sm-3 col-xs-12";
				div.appendChild(divCombatFormFilter);
				var combatFilter = document.createElement("SELECT");
				combatFilter.id = "combatFilter";
				combatFilter.className = "form-control";
				combatFilter.onchange = function(){getSaberSorted()};
				divCombatFormFilter.appendChild(combatFilter);
				addCombatFormSelectOptions();
				var input = document.createElement("INPUT");
				input.className = "form-control";
				input.id = "searchInput";
				input.placeholder = "Search For Stocks";
				input.onkeyup = function(){filterListTable("stockTable","searchInput")};
				divInputGroup.appendChild(input);
				var divAddon = document.createElement("DIV");
				divAddon.className = "input-group-addon";
				var searchGlyphicon =  document.createElement("SPAN");
				searchGlyphicon.className = "glyphicon glyphicon-search";
				divAddon.appendChild(searchGlyphicon);
				divInputGroup.appendChild(divAddon);
				divSearchDiv.appendChild(divInputGroup);
				div.appendChild(divSearchDiv);
				var divSortValue = document.createElement("DIV");
				divSortValue.className = "col-sm-offset-2 col-sm-3 col-xs-6 padding-left-right-5";
				div.appendChild(divSortValue);
				var divSortType = document.createElement("DIV");
				divSortType.className = "col-sm-3 col-xs-6 padding-left-right-5";
				div.appendChild(divSortType);
				var selectSortValue = document.createElement("SELECT");
				selectSortValue.id = "selectSortValue";
				selectSortValue.className = "form-control";
				selectSortValue.onchange = function(){getOrderListSorted()};
				divSortValue.appendChild(selectSortValue);
				var selectSortType = document.createElement("SELECT");
				selectSortType.id = "selectSortType";
				selectSortType.className = "form-control";
				selectSortType.onchange = function(){getOrderListSorted()};
				divSortType.appendChild(selectSortType);
				var optionsSortValue = [{name:"Order Id", value:"id"},{name:"Saber Name", value:"saberName"},{name:"Amount", value:"orderAmount"}
				,{name:"User", value:"user"}];
				for (x in optionsSortValue){
					addOption("selectSortValue", optionsSortValue[x].name,  optionsSortValue[x].value);
				};
				var optionsSortType = [{name:"Ascending", value:"Asc"},{name:"Descending", value:"Desc"}];
				for (x in optionsSortType){
					addOption("selectSortType", optionsSortType[x].name,  optionsSortType[x].value);
				};
				var divStockTable = document.createElement("DIV");
				divStockTable.id = "divStockTable";
				divStockTable.className = "container-fluid margin-top-10";
				container.appendChild(divStockTable);
				var stockTable =  document.createElement("TABLE");
				stockTable.id = "stockTable";
				stockTable.className = "table table-striped table-condensed";
				var tableBody =  document.createElement("TBODY");
				tableBody.id = "tBody";
				stockTable.appendChild(tableBody);
				divStockTable.appendChild(stockTable);
				getOrderListSorted();
				break;
				
			case"Orders":
				var divHeader = document.createElement("DIV");
				divHeader.className="container-fluid";
				divHeader.id = "divHeader";
				container.appendChild(divHeader);
				var header = document.createElement("H3");
				header.className="col-sm-12 text-center";
				divHeader.appendChild(header);
				header.innerHTML  = "Light Saber Orders";
				var div = document.createElement("DIV");
				div.className = "container-fluid margin-top-10";
				container.appendChild(div);	
				var divSearchDiv = document.createElement("DIV");
				divSearchDiv.className = "col-sm-3 col-xs-12";
				var divInputGroup = document.createElement("DIV");
				divInputGroup.className = "input-group";
				var input = document.createElement("INPUT");
				input.className = "form-control";
				input.id = "searchInput";
				input.placeholder = "Search For Stocks";
				input.onkeyup = function(){filterListTable("stockTable","searchInput")};
				divInputGroup.appendChild(input);
				var divAddon = document.createElement("DIV");
				divAddon.className = "input-group-addon";
				var searchGlyphicon =  document.createElement("SPAN");
				searchGlyphicon.className = "glyphicon glyphicon-search";
				divAddon.appendChild(searchGlyphicon);
				divInputGroup.appendChild(divAddon);
				divSearchDiv.appendChild(divInputGroup);
				div.appendChild(divSearchDiv);
				var divSortValue = document.createElement("DIV");
				divSortValue.className = "col-sm-offset-2 col-sm-3 col-xs-6 padding-left-right-5";
				div.appendChild(divSortValue);
				var divSortType = document.createElement("DIV");
				divSortType.className = "col-sm-3 col-xs-6 padding-left-right-5";
				div.appendChild(divSortType);
				var selectSortValue = document.createElement("SELECT");
				selectSortValue.id = "selectSortValue";
				selectSortValue.className = "form-control";
				selectSortValue.onchange = function(){getOrderListSorted()};
				divSortValue.appendChild(selectSortValue);
				var selectSortType = document.createElement("SELECT");
				selectSortType.id = "selectSortType";
				selectSortType.className = "form-control";
				selectSortType.onchange = function(){getOrderListSorted()};
				divSortType.appendChild(selectSortType);
				var optionsSortValue = [{name:"Order Id", value:"id"},{name:"Saber Name", value:"saberName"},{name:"Amount", value:"orderAmount"}
				,{name:"User", value:"user"}];
				for (x in optionsSortValue){
					addOption("selectSortValue", optionsSortValue[x].name,  optionsSortValue[x].value);
				};
				var optionsSortType = [{name:"Ascending", value:"Asc"},{name:"Descending", value:"Desc"}];
				for (x in optionsSortType){
					addOption("selectSortType", optionsSortType[x].name,  optionsSortType[x].value);
				};
				var divStockTable = document.createElement("DIV");
				divStockTable.id = "divStockTable";
				divStockTable.className = "container-fluid margin-top-10";
				container.appendChild(divStockTable);
				var stockTable =  document.createElement("TABLE");
				stockTable.id = "stockTable";
				stockTable.className = "table table-striped table-condensed";
				var tableBody =  document.createElement("TBODY");
				tableBody.id = "tBody";
				stockTable.appendChild(tableBody);
				divStockTable.appendChild(stockTable);
				getOrderListSorted();
				break;
		}
	}
	
	
	//For reading and posting data from XML file
	function getDataFromXmlFile(){
		var files = document.getElementById("inputFile").files;
		  var reader = new FileReader();
		  reader.onload = function() {
		    var parsed = new DOMParser().parseFromString(this.result, "application/xml");
		    postDataXml("saber/xml", parsed);
		  };
		  reader.readAsText(files[0]);
	}
	
	
	// This function is for filtering the tables as the input in the searchbox
	function filterListTable(tableId, searchId) {
		var input, filter, table, tr, td, i, x;
		input = document.getElementById(searchId);
		filter = input.value.toUpperCase();
		table = document.getElementById(tableId);
		tr = table.getElementsByTagName("tr");
		
			for (i = 1; i < tr.length; i++) { //started from 1 because i don't want remove header
			var controller = 0;
			td = tr[i].getElementsByTagName("td");
			for(j = 1; j < td.length; j++){ //started from 1 because i don't want to check radio boxes
				if (td[j]) {
					if (td[j].innerHTML.toUpperCase().indexOf(filter) > -1) {
						controller += 1 ;
						break;
					}
				}
			}
			if (controller > 0) {
				tr[i].style.display = "";
			} else {
				tr[i].style.display = "none";
			}
		}
	}
	
	//For getting user data (its working with post methode)
	function getUser(api,data) {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				var container = document.getElementById("containerUser");
				//removeElement("emailLabel");
				container.innerHTML = "";
				myObj = JSON.parse(this.responseText);
				var roleLabel = document.createElement("LABEL");
				roleLabel.className = "margin-right-5";
				roleLabel.innerHTML = myObj.role;
				container.appendChild(roleLabel);
				var nameLabel = document.createElement("LABEL");
				nameLabel.innerHTML = myObj.name;
				nameLabel.className = "margin-right-5";
				container.appendChild(nameLabel);
				var seperatorAge = document.createElement("LABEL");
				seperatorAge.innerHTML = "  -  Age: ";
				seperatorAge.className = "margin-right-5";
				container.appendChild(seperatorAge);
				var ageLabel = document.createElement("LABEL");
				ageLabel.innerHTML = myObj.age;
				ageLabel.id ="age";
				ageLabel.className = "margin-right-5";
				container.appendChild(ageLabel);
				var dissolvedLabel = document.createElement("LABEL");
				if(myObj.dissolvedInForce){
					var seperator = document.createElement("LABEL");
					seperator.innerHTML = "  -  ";
					seperator.className = "margin-right-5";
					container.appendChild(seperator);
					var dissolvedLabel = document.createElement("LABEL");
					dissolvedLabel.innerHTML = "Dissolved in force";
					container.appendChild(dissolvedLabel);
					var div = document.createElement("DIV");
					div.className="row";
					container.appendChild(div);
					var restLabel = document.createElement("LABEL");
					restLabel.innerHTML = "REST IN FORCE...";
					div.appendChild(restLabel);
					removeElement("lightSabersMenu");
					removeElement("saberListMenu");
				}else{
					var seperatorForce = document.createElement("LABEL");
					var forceLabel = document.createElement("LABEL");
					forceLabel.id = "force";
					if(myObj.force < 0){
						seperatorForce.innerHTML = "  -  Force is so strong with you! it's ";
						forceLabel.innerHTML = "Unlimited";
					} else {
						seperatorForce.innerHTML = "  -  Force: ";
						forceLabel.innerHTML = myObj.force;
					}
					seperatorForce.className = "margin-right-5";
					container.appendChild(seperatorForce);
					forceLabel.className = "margin-right-5";
					container.appendChild(forceLabel);
				}
			}
		}
		xhttp.open("POST", "http://localhost:8082/" + api, true);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(data);
	}
	
	function saveNewLightSaber(){
		var name, planet, available, crystal, combatForms = "";
		name = document.getElementById("name_input").value;
		available = document.getElementById("available_input").value;
		var radios = document.getElementsByName("crystalRadio");
	    for (var i = 0; i < radios.length; i++)
	    {
	    	if(radios[i].checked == true){
	        	crystal = radios[i].value;
	        	break;
	    	}
	    }
	    var checkboxes = document.getElementById("divSelectedCombatForm").getElementsByTagName("INPUT");
	    for (var i = 0; i < checkboxes.length; i++)
	    {
	    	if(combatForms.length < 1) {
	    		combatForms = combatForms + '{"id":'+ checkboxes[i].id +'}';
    		}else{
    			combatForms = combatForms + ',{"id":'+ checkboxes[i].id +'}';
    		}
	    }
		if(name == ""){
			alert("Force doesn't like this name");
		} else if (crystal == null){
			alert("Light sabers gets their power from crystal, without crystal it will be useless");
		}else if (available == ""){
			postData205("saber/json",'{"name":"' + name + '", "crystal":{"id":' + crystal + '}, "combatForm":[' + combatForms + ']}');
		}else{
			postData205("saber/json",'{"name":"' + name + '","available":' + available + ', "crystal":{"id":' + crystal + '}, "combatForm":[' + combatForms + ']}');
		}
	}
	
	//For geting light sabers and after that sorts and filters it
	function getSaberSorted() {
		var myArr, myObj, x;
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				myArr = JSON.parse(this.responseText);
				var combatFilterValue = document.getElementById("combatFilter").value;
				if(combatFilterValue != "all"){
					var removeFromArr = [];
					for(x in myArr){
						var counter = true;
						innerLoop:
						for(y in myArr[x].saberCombatForms){
							if(myArr[x].saberCombatForms[y].name == combatFilterValue) {
								counter = false;
								break innerLoop;
							}
						}
						if(counter) removeFromArr.push(x);
					}
					removeFromArr.sort(function(a, b){return b - a});
					
					for(x in removeFromArr) {
						myArr.splice(removeFromArr[x],1);
					}
				}
				var container = document.getElementById("divSabers");
				container.innerHTML="";
				if(myArr.length > 0){
					myArr = sortArray(myArr);
					for(x in myArr){
						myObj = myArr[x];
						if((x % 3) == 0){
							var rowForThree = document.createElement("DIV");
							rowForThree.className = "row";
							container.appendChild(rowForThree);
						}
						var itemDiv = document.createElement("DIV");
						itemDiv.className = "col-sm-4 padding-left-right-5";
						rowForThree.appendChild(itemDiv);
						var itemDivBordered = document.createElement("DIV");
						itemDivBordered.className = "col-sm-12 col-xs-12 well";
						itemDivBordered.id = myObj.id;
						itemDiv.appendChild(itemDivBordered);
						var labelSaberName = document.createElement("LABEL");
						labelSaberName.className = "col-sm-12 col-xs-12 text-center padding-left-right-0";
						labelSaberName.innerHTML = myObj.name;
						labelSaberName.style.fontWeight = "bold";
						itemDivBordered.appendChild(labelSaberName);
						var image = document.createElement("IMG");
						image.className = "col-sm-12 col-xs-12 padding-left-right-0";
						image.id = myObj.id + "_img";
						var picColor = myObj.crystal.color.toLowerCase();
						if(picColor == "blue" || picColor == "green" || picColor == "purple" || picColor == "yellow" || picColor == "orange" || picColor == "red"){
							image.src = "/pictures/light_saber_" + myObj.crystal.color + ".png";
						}else{
							image.src = "/pictures/light_saber_unknown.png";
						}
						if(document.getElementById("age") != null && document.getElementById("force").innerHTML != "Unlimited" && myObj.crystal.powerUsageMultiplier > 100 ){
							itemDivBordered.onmouseover = function(){thisIsNot(this.id, false)};
							itemDivBordered.onmouseout = function(){thisIsNot(this.id, true)};
						}
						itemDivBordered.appendChild(image);
						var labelCrystalName = document.createElement("LABEL");
						labelCrystalName.className = "col-sm-4 col-xs-4 text-right padding-left-right-0";
						labelCrystalName.innerHTML = "Crystal: ";
						itemDivBordered.appendChild(labelCrystalName);
						var labelCrystalNameValue = document.createElement("LABEL");
						labelCrystalNameValue.className = "col-sm-8 col-xs-8 padding-left-right-5";
						labelCrystalNameValue.style.fontWeight = "normal";
						labelCrystalNameValue.innerHTML =myObj.crystal.name;
						itemDivBordered.appendChild(labelCrystalNameValue);
						var labelCrystalPlanet = document.createElement("LABEL");
						labelCrystalPlanet.className = "col-sm-4 col-xs-4 text-right padding-left-right-0";
						labelCrystalPlanet.innerHTML = "Planet: ";
						itemDivBordered.appendChild(labelCrystalPlanet);
						var labelCrystalPlanetValue = document.createElement("LABEL");
						labelCrystalPlanetValue.className = "col-sm-8 col-xs-8 padding-left-right-5";
						labelCrystalPlanetValue.style.fontWeight = "normal";
						labelCrystalPlanetValue.innerHTML =myObj.crystal.planet;
						itemDivBordered.appendChild(labelCrystalPlanetValue);
						var labelCrystalColor = document.createElement("LABEL");
						labelCrystalColor.className = "col-sm-4 col-xs-4 text-right padding-left-right-0";
						labelCrystalColor.innerHTML = "Color: ";
						itemDivBordered.appendChild(labelCrystalColor);
						var labelCrystalColorValue = document.createElement("LABEL");
						labelCrystalColorValue.className = "col-sm-8 col-xs-8 padding-left-right-5";
						labelCrystalColorValue.style.fontWeight = "normal";
						labelCrystalColorValue.id = myObj.id + "_color";
						labelCrystalColorValue.innerHTML = myObj.crystal.color;
						itemDivBordered.appendChild(labelCrystalColorValue);
						var labelPower = document.createElement("LABEL");
						labelPower.className = "col-sm-4 col-xs-4 text-right padding-left-right-0";
						labelPower.innerHTML = "Force: ";
						itemDivBordered.appendChild(labelPower);
						var labelPowerValue = document.createElement("LABEL");
						labelPowerValue.className = "col-sm-8 col-xs-8 padding-left-right-5";
						labelPowerValue.style.fontWeight = "normal";
						if(document.getElementById("age") != null){
							var age = document.getElementById("age").innerText;
							labelPowerValue.innerHTML = ((myObj.crystal.powerUsageMultiplier * age) / 10) + " F";
						}else{
							labelPowerValue.innerHTML = myObj.crystal.powerUsageMultiplier + " %";
						}
						itemDivBordered.appendChild(labelPowerValue);
						var labelPrice = document.createElement("LABEL");
						labelPrice.className = "col-sm-4 col-xs-4 text-right padding-left-right-0";
						labelPrice.innerHTML = "Price: ";
						itemDivBordered.appendChild(labelPrice);
						var labelPriceValue = document.createElement("LABEL");
						labelPriceValue.className = "col-sm-8 col-xs-8 padding-left-right-5";
						labelPriceValue.style.fontWeight = "normal";
						labelPriceValue.innerHTML = myObj.crystal.calculatedPrice;
						itemDivBordered.appendChild(labelPriceValue);
						var labelAvailable = document.createElement("LABEL");
						labelAvailable.className = "col-sm-4 col-xs-4 text-right padding-left-right-0";
						labelAvailable.innerHTML = "Available: ";
						itemDivBordered.appendChild(labelAvailable);
						var labelAvailableValue = document.createElement("LABEL");
						labelAvailableValue.className = "col-sm-8 col-xs-8 padding-left-right-5";
						labelAvailableValue.style.fontWeight = "normal";
						if(myObj.available > 0){
							labelAvailableValue.innerHTML = "In Stock"
						}else{
							labelAvailableValue.innerHTML = "Out Of Stock";
							labelAvailableValue.style.color = "red";
						}
						itemDivBordered.appendChild(labelAvailableValue);
						var orderButton = document.createElement("BUTTON");
						orderButton.type = "button";
						orderButton.innerHTML = "Order";
						if(myObj.available <= 0){
							orderButton.disabled = "true";
							orderButton.className = "btn btn-warning col-sm-6 col-xs-6 padding-left-right-5";
						}else{
							orderButton.className = "btn btn-primary col-sm-6 col-xs-6 padding-left-right-5";
							orderButton.onclick = function(){
								var id = this.parentElement.id;
								var amount = document.getElementById(id + "_amount").value;
								var email = document.getElementById("emailLabel").innerHTML;
								alert(amount);
								if(amount != "" && amount > 0){
									alert('{"orderAmount":' + amount + ',"user":{"email":"' + email + '"}}');
									postData("order/saber/" + id,'{"orderAmount":' + amount + ',"user":{"email":"' + email + '"}}');
								}
							};
						}
						if(document.getElementById("age") != null){
							itemDivBordered.appendChild(orderButton);
							divAmount = document.createElement("DIV");
							divAmount.className = "col-sm-6 col-xs-6 padding-left-right-5";
							itemDivBordered.appendChild(divAmount);
							var amountInput = document.createElement("INPUT");
							amountInput.className = "form-control col-sm-6 col-xs-6 padding-left-right-5";
							amountInput.id = myObj.id + "_amount";
							amountInput.type = "number";
							amountInput.min = 0 ;
							amountInput.max = myObj.available;
							amountInput.placeholder = "Amount";
							//onkeyup function for extra controling that the amount is between min and max values
							amountInput.onkeyup = function(){
								if(this.value< 0){
									this.value = 0;
								}
								if(this.value > Number(this.max)){
									this.value = Number(this.max);
								}
							}
							divAmount.appendChild(amountInput);
						}
					}
				}
			}
		};
		xhttp.open("GET", "http://localhost:8082/Jedisabershop/saber/json");
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send();
	}
	
	//For geting light sabers and after that sorts and filters it
	function getOrderListSorted() {
		var myObj, x;
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				var tableBody = document.getElementById("tBody");
				tableBody.innerHTML="";
				var rowHeader =  document.createElement("TR");
				rowHeader.className = "header";
				var headerTexts = ["Order Id","Saber Name","Amount","Ordered User"];
				for(x in headerTexts){
					var header =  document.createElement("TH");
					header.innerHTML = headerTexts[x];
					rowHeader.appendChild(header);
				}
				tableBody.appendChild(rowHeader);
				myObj = JSON.parse(this.responseText);
				if(myObj.length > 0){
					myArr = sortArray(myObj);
					for(x in myObj){
						var row =  document.createElement("TR");
						row.id = myObj[x].id + "_row";
						var columnId =  document.createElement("TD");
						columnId.innerHTML = myObj[x].id;
						row.appendChild(columnId);
						var columnSaberName =  document.createElement("TD");
						columnSaberName.innerHTML = myObj[x].saber.name;
						row.appendChild(columnSaberName);
						var columnAmount =  document.createElement("TD");
						columnAmount.innerHTML = myObj[x].orderAmount;
						row.appendChild(columnAmount);
						var columnUser =  document.createElement("TD");
						columnUser.innerHTML = myObj[x].user.name + " - " + myObj[x].user.email;
						row.appendChild(columnUser);
						tableBody.appendChild(row);
					}
				}
			}
		}
		xhttp.open("GET", "http://localhost:8082/Jedisabershop/order/saber");
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send();
	}
	
	//Just for a small joke - if the power usage of the light saber is higher then the user
	function thisIsNot(id, out){
		var element = document.getElementById(id+"_img");
		if(out){
			var picColor = document.getElementById(id+"_color").innerHTML.toLowerCase();
			if(picColor == "blue" || picColor == "green" || picColor == "purple" || picColor == "yellow" || picColor == "orange" || picColor == "red"){
				element.src = "/pictures/light_saber_" + picColor + ".png";
			}else{
				element.src = "/pictures/light_saber_unknown.png";
			}
		}else{
			element.src = "/pictures/light_saber_not.png";
		}
	}
	
	//---------------------------------------------//
	//   R E U S A B L E   C O D E S   S T A R T   //
	//---------------------------------------------//
	
	//Function to change pages (Actually it generates requested pages)
	function changeTo(page){
		clearContainer();
		document.title = "The Light Saber Shop - " + page;
		setActive(page);
		generatePage(page);
	}
	
	//Function clear the container in page
	function clearContainer(){
		document.getElementById("container").innerHTML="";
	}
	
	//For getting data as json
	function getDataJson(api) {
		var myObj, x;
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				myObj = JSON.parse(this.responseText);
			}
		};
		xhttp.open("GET", "http://localhost:8082/api/" + api);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send();
	}
	
	//For getting data as Xml !!Didnt verified that yet its working!!
	function getDataXml(api) {
		var myObj, x;
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				myObj = XML.parse(this.responseText);
			}
		};
		xhttp.open("GET", "http://localhost:8082/api/" + api);
		xhttp.setRequestHeader("Content-type", "application/xml");
		xhttp.send();
	}
	
	//For posting data and Response: HTTP 205
	function postData205(api,data) {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 205) {
				switch(api){
				case "saber/json":
					var header = document.getElementById("header_result");
					header.innerHTML = "Force Accepted This Light Saber";
					var span = document.createElement("SPAN");
					span.className = "glyphicon glyphicon-ok";
					header.appendChild(span);
					document.getElementById("name_input").value="";
					document.getElementById("available_input").value="";
					document.getElementById("crystalSearch").value="";
					var radios = document.getElementsByName("crystalRadio");
				    for (var i = 0; i < radios.length; i++)
				    {
				    	radios[i].checked = false;
				    }
				    var checkboxes = document.getElementById("divSelectedCombatForm").getElementsByTagName("INPUT");
				    var count = checkboxes.length;
				    for (var i = 0; i < count;) {
				    	if(checkboxes[i].disabled != true) {
				    		checkboxes[i].click();
				    		count -= 1;
			    		}else{
				    		i++;
				    	}
				    }
					break;
				}
			}
		};
		xhttp.open("POST", "http://localhost:8082/Jedisabershop/" + api, true);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(data);
	}
	
	//For posting data
	function postDataXml(api,data) {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 205) {
				
			}
		};
		xhttp.open("POST", "http://localhost:8082/Jedisabershop/" + api, true);
		xhttp.setRequestHeader("Content-type", "application/xml");
		xhttp.send(data);
	}

	//For posting data
	function postData(api,data) {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 202) {
				document.getElementById("Container").innerHTML = this.responseText+" Item Added";
			}
		};
		xhttp.open("POST", "http://localhost:8082/Jedisabershop/" + api, true);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(data);
	}
	
	//For updating data
	function putData(api,data) {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 202) {

			}
		};
		xhttp.open("PUT", "http://localhost:8082/Jedisabershop/" + api, true);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(data);
	}
	
	//For deleting data
	function deleteData(api,data) {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 204) {
			};
		};
		xhttp.open("DELETE", "http://localhost:8082/Jedisabershop/" + api, true);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(data);
	};
	
	//Removing any elements by id from page
	function removeElement(id){
		var element = document.getElementById(id);
		element.parentNode.removeChild(element);
	}
	
	//For setting menu button as active and removes active from other menu buttons
	function setActive(page){
		var pageNames = [{name:"Light Sabers",id:"lightSabersMenu"},{name:"XML File",id:"saberListMenu"},{name:"XML List",id:"saberListMenu"},
			{name:"Add New Light Saber",id:"jediMasterMenu"},{name:"Add Light Saber From File",id:"jediMasterMenu"},
			{name:"Add Light Saber With JSON",id:"jediMasterMenu"} ]; 
		var pageId="";
		for(x in pageNames){
			if(pageNames[x].id == pageId) {
				continue;
			}
			if(pageNames[x].name == page){
				document.getElementById(pageNames[x].id).className += " active";
				pageId = pageNames[x].id;
			} else {
				if(document.getElementById(pageNames[x].id) != null && document.getElementById(pageNames[x].id).className.includes(" active")){
					document.getElementById(pageNames[x].id).className = document.getElementById(pageNames[x].id).className.replace(" active","");
				}
			}
		}
		
	}
	
	//These functions for automated drag and drop support for combat forms
	function allowDrop(ev) {
	    ev.preventDefault();
	}
	
	function drag(ev) {
	    ev.dataTransfer.setData("text/html", ev.target.id);
	}
	
	function dropUnselected(ev) {
	    ev.preventDefault();
	    var data = ev.dataTransfer.getData("text/html");
	    document.getElementById(data.substring(0,data.indexOf("_"))).checked = false;
	    document.getElementById("divUnselectedCombatForm").appendChild(document.getElementById(data));
	}
	function dropSelected(ev) {
	    ev.preventDefault();
	    var data = ev.dataTransfer.getData("text/html");
	    document.getElementById(data.substring(0,data.indexOf("_"))).checked = true;
	    document.getElementById("divSelectedCombatForm").appendChild(document.getElementById(data));
	}
	
	//Manually changing selection for combat forms
	function changeCombatFormSelection(id){
		var element = document.getElementById(id+"_div");
		var checkBox = document.getElementById(id);
		if (checkBox.checked == true){
			document.getElementById("divSelectedCombatForm").appendChild(element);
		} else {
			document.getElementById("divUnselectedCombatForm").appendChild(element);
		}
	};
	
	//Sorting function for Saber List
	function sortArray(array) {
		var sort,subKey ="";
		var sortType = document.getElementById("selectSortType").value;
		if(sortType == "Asc"){
			sort = false;
		} else {
			sort = true;
		}	
		var key = document.getElementById("selectSortValue").value;
		switch(key){
		//cases for add saber page
		case "crystalName":
			key = "crystal";
			subKey = "name";
			break;
		case "color":
			subKey = key;
			key = "crystal";
			break;
		case "planet":
			subKey = key;
			key = "crystal";
			break;
		case "force":
			subKey = "powerUsageMultiplier";
			key = "crystal";
			break;
		case "price":
			subKey = "calculatedPrice";
			key = "crystal";
			break;
		//cases for order list page
		case "saberName":
			key = "saber";
			subKey= "name";
			break;
		case "user":
			key = "user";
			subKey= "name";
			break;
		}
		if(subKey != ""){
			if(typeof array[0][key][subKey] == "string" ){
				array.sort(function(a, b) {
			        if (a[key][subKey].toLowerCase() < b[key][subKey].toLowerCase()){
			            return sort ? 1 : -1;
			        }
			        if (a[key][subKey].toLowerCase() > b[key][subKey].toLowerCase()){
			            return sort ? -1 : 1;
			        }
			        return 0;
			    });
			    return array;
			}else{
				array.sort(function(a, b) {
			        if (a[key][subKey] < b[key][subKey]){
			            return sort ? 1 : -1;
			        }
			        if (a[key][subKey] > b[key][subKey]){
			            return sort ? -1 : 1;
			        }
			        return 0;
			    });
			    return array;			
			}
		}else{
			if(typeof array[0][key] == "string"){
				array.sort(function(a, b) {
			        if (a[key].toLowerCase() < b[key].toLowerCase()){
			            return sort ? 1 : -1;
			        }
			        if (a[key].toLowerCase() > b[key].toLowerCase()){
			            return sort ? -1 : 1;
			        }
			        return 0;
			    });
			    return array;
			}else{
				array.sort(function(a, b) {
			        if (a[key] < b[key]){
			            return sort ? 1 : -1;
			        }
			        if (a[key] > b[key]){
			            return sort ? -1 : 1;
			        }
			        return 0;
			    });
			    return array;
			}
		}		
	};
	
	//adding option to select function
	function addOption(select, optionName, optionValue){
		var element = document.getElementById(select);
		var option = document.createElement("OPTION");
		option.innerHTML = optionName;
		option.value = optionValue;
		element.appendChild(option);
	};
	
	function addCombatFormSelectOptions(){
		var optionsCombatForm = [{name:"All Combat Forms", value:"all"},{name:"Shii-Cho", value:"Shii-Cho"},{name:"Makashi", value:"Makashi"},
			{name:"Soresu", value:"Soresu"},{name:"Ataru", value:"Ataru"},{name:"Shien (Djem So)", value:"Shien (Djem So)"},
			{name:"Niman", value:"Niman"},{name:"Juyo (Vaapad)", value:"Juyo (Vaapad)"}];
		for (x in optionsCombatForm){
			addOption("combatFilter", optionsCombatForm[x].name,  optionsCombatForm[x].value);
		};
	}
	
	//---------------------------------------------//
	//     R E U S A B L E   C O D E S   E N D     //
	//---------------------------------------------//
	
</script>
</head>
<body onload="checkMenu()">
	<nav class="navbar navbar-default ">
	  <div class="container-fluid">
	    <ul id="mainMenu" class="nav navbar-nav">
	      <li id="lightSabersMenu"><a onclick='changeTo("Light Sabers")'>Light Sabers</a></li>
	      <li id="saberListMenu" class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Get List Of Light Sabers<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a onclick='changeTo("XML File")'>XML File</a></li>
            <li><a onclick='changeTo("XML List")'>XML List</a></li>
          </ul>
        </li>
        <li id="jediMasterMenu" class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Jedi Master Menu<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a onclick='changeTo("Add New Light Saber")'>Add New Light Saber</a></li>
            <li><a onclick='changeTo("Add Light Sabers From XML File")'>Add Light Sabers From XML File</a></li>
            <li role="separator" class="divider"></li>
            <li><a onclick='changeTo("Light Saber Stock List")'>Stock List</a></li>
            <li role="separator" class="divider"></li>
            <li><a onclick='changeTo("Orders")'>Orders</a></li>
          </ul>
        </li>
	    </ul>
	    <ul class="nav navbar-nav navbar-right">
	      <li id="signUpMenu" ><a th:href="@{/SignUp}"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
	      <li id="loginMenu" class="dropdown">
	      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-log-in"></span> Login</a>
          <ul class="dropdown-menu">
            <li><div th:if="${param.error}">
		            Invalid username and password.
		        </div>
		        <div th:if="${param.logout}">
		            You have been logged out.
		        </div>
		        <form th:action="@{/login}" method="post">
		        	<div class="form-group margin-right-5 margin-left-5">
						<label for="DropdownFormEmail2" style="color:black">Email address</label>
						<input type="email" name="username" class="form-control" id="DropdownFormEmail2" placeholder="email@example.com">
					</div>
					<div class="form-group margin-right-5 margin-left-5">
						<label for="DropdownFormPassword2" style="color:black">Password</label>
						<input type="password" name="password" class="form-control" id="DropdownFormPassword2" placeholder="Password">
					</div>
					<div class="text-center margin-right-5 margin-left-5">
						<button type="submit" class="btn btn-default btn-lg btn-block">Sign in</button>
					</div>
		        </form>
        	</li>
          </ul>
        </li>
        <li id="logoutMenu"><a th:href="@{/logout}"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
	    </ul>
	    <label id="emailLabel" th:inline="text" hidden="true">[[${#httpServletRequest.remoteUser}]]</label>
	  </div>
	  <div id="containerUser" class="container-fluid text-center navbar-inverse">
		</div>
	</nav>
	<div id="container" class="container-fluid">
		<div class="row text-center">
			<h2>Welcome to</h2>
        </div>
        <div class="row text-center">
			<h1>The Light Saber Shop</h1>
        </div>
        <div class="row text-center">
			<img alt="The_Light_Saber_Shop_logo" src="pictures/thelightsabershoplogo.png">
        </div>
        <div class="row text-center">
        </div>
        <div class="row text-center" style="margin-top:40px">
			<h4>Coded and Designed By</h4>
        </div>
        
        <div class="row text-center">
			<img alt="Sevket_Ozturk_logo" src="pictures/sevket_ozturk_logo.png" height="78px">
        </div>
    </div>
</body>
</html>